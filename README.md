# MAThesis


## Running the app.py

Ensure GROQ_API_KEY is set in .env

Install dependencies: `pip install -r requirements.txt`

Run the app: `streamlit run app.py`

Input parameters:
  - Upload Raw Data CSV: query_result.csv
  - Upload Processed Data CSV: bin_results.csv


## PostgreSQL Database

Hosted at UZH, VPN connection required to connect to server.


## Other Datasets
1. query_result.csv is extracted from the PostgreSQL database by the Data Query Agent.
2. bin_results.csv is the processed dataset (median calculation + linear regression).
3. second_graph_output_orange.csv is the median dataset generated by the Median Calculation Agent.
4. second_graph_output_green.csv is the linear regression with the "predicted rewards" data generated by the Linear Regression Agent.
5. second_graph_output_1.txt is the column description file.
6. Visulaization.png is the final plot output generated by the Visualization Agent.
7. schema.md provides table information so that LLMs understand the table better.


## Juypter Notebooks
1. Data Query Agent.ipynb allows users to extract raw data from the PostgreSQL database and save it to a CSV file.
2. Median Calculation Agent.ipynb allows users to calculate the median of the extracted raw data CSV file in each bin and save it to another CSV file.
3. Linear Regression Agent (LLM).ipynb allows users to have the predicted rewards from the median dataset and have the linear regression line for future plotting. The results are saved in a CSV file.
4. Visualization Agent.ipynb allows users to input the generated CSV files by the previous three agents and output a plot for visualization.


## Executing the Jupyter Notebooks

Ensure GROQ_API_KEY, OPENAI_API_KEY, LANGCHAIN_API_KEY, PGPASSWORD and DATABASE_URI are set in .env

Install Jupyter: `pip install notebook`

Run the Jupyter notebook: `jupyter notebook`

Execute the notebooks


## Other documentations
Prompts.xlsx is the collection of the system prompts and the user prompts of all agents. It documents the effective prompts for the tasks in this thesis. Their pattern and effectiveness are also dedicated for further studies in this field.

Linear Regression Agent Model Comparison.xlsx documents the experiments of the three applied models with different temperature settings. The average of execution time and error rate for each setting is documented and plotted in the sheets.